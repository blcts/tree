{"ast":null,"code":"var _jsxFileName = \"/Users/lizaz/fed-exam-category-tree-blcts/src/components/todoHeader.tsx\",\n    _s = $RefreshSig$();\n\n/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React, { useState } from 'react';\nimport { addTodos, editTodo } from '../api/todos';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const TodoHeader = props => {\n  _s();\n\n  const {\n    newTodoField,\n    query,\n    setQuery,\n    user,\n    setTodos,\n    todos,\n    setIsError,\n    setErrorMessage,\n    setIsLoading\n  } = props;\n  const [, setIsAllSame] = useState(false);\n  const newTodo = {\n    userId: user.id,\n    title: query.trim(),\n    completed: false\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    setIsLoading(true);\n\n    if (newTodo.title.length <= 0) {\n      setErrorMessage('rpigejiajh');\n      return;\n    }\n\n    addTodos(newTodo).then(currentTodo => {\n      setIsError(false);\n      setErrorMessage('');\n      setTodos(prev => [...prev, currentTodo]);\n      setQuery('');\n    }).catch(() => {\n      setIsError(true);\n      setErrorMessage('add');\n    }).finally(() => setIsLoading(false));\n  };\n\n  const toggleAll = () => {\n    setIsLoading(true); // check if all todos the same\n\n    const sameTodos = todos.every(todo => todo.completed === todos[0].completed); // if the same - do variable true or false\n\n    if (sameTodos) {\n      setIsAllSame(todos[0].completed);\n    }\n\n    setTodos(prev => {\n      return prev.map(todo => {\n        const rewrittenTodo = { ...todo\n        };\n\n        if (sameTodos) {\n          rewrittenTodo.completed = !todos[0].completed;\n        } else {\n          rewrittenTodo.completed = true;\n        }\n\n        editTodo(todo.id, todo.title, rewrittenTodo.completed);\n        setIsAllSame(true);\n        return rewrittenTodo;\n      });\n    });\n    setIsLoading(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(\"header\", {\n    className: \"todoapp__header\",\n    children: [todos.length >= 1 && /*#__PURE__*/_jsxDEV(\"button\", {\n      \"data-cy\": \"ToggleAllButton\",\n      type: \"button\",\n      className: \"todoapp__toggle-all active\",\n      onClick: () => toggleAll()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 11\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSubmit,\n      children: /*#__PURE__*/_jsxDEV(\"input\", {\n        \"data-cy\": \"NewTodoField\",\n        type: \"text\",\n        ref: newTodoField,\n        className: \"todoapp__new-todo\",\n        placeholder: \"What needs to be done?\",\n        value: query,\n        onChange: event => setQuery(event.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 112,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 108,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 95,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TodoHeader, \"Y7EwfbCXD63uO7y4R0f862zYRwM=\");\n\n_c = TodoHeader;\n\nvar _c;\n\n$RefreshReg$(_c, \"TodoHeader\");","map":{"version":3,"names":["React","useState","addTodos","editTodo","TodoHeader","props","newTodoField","query","setQuery","user","setTodos","todos","setIsError","setErrorMessage","setIsLoading","setIsAllSame","newTodo","userId","id","title","trim","completed","handleSubmit","event","preventDefault","length","then","currentTodo","prev","catch","finally","toggleAll","sameTodos","every","todo","map","rewrittenTodo","target","value"],"sources":["/Users/lizaz/fed-exam-category-tree-blcts/src/components/todoHeader.tsx"],"sourcesContent":["/* eslint-disable jsx-a11y/control-has-associated-label */\nimport React, { FormEvent, useState } from 'react';\nimport { addTodos, editTodo } from '../api/todos';\nimport { NewTodo, Todo } from '../types/Todo';\nimport { User } from '../types/User';\n\ninterface Props {\n  newTodoField: React.RefObject<HTMLInputElement>,\n  query: string,\n  setQuery: (v:string) => void,\n  user: User,\n  setTodos: CallableFunction,\n  todos: Todo[],\n  setIsError:(v:boolean) => void,\n  setErrorMessage: (v: string) => void\n  setIsLoading: (v:boolean) => void,\n\n}\n\nexport const TodoHeader: React.FC<Props> = (props) => {\n  const {\n    newTodoField,\n    query,\n    setQuery,\n    user,\n    setTodos,\n    todos,\n    setIsError,\n    setErrorMessage,\n    setIsLoading,\n  } = props;\n\n  const [, setIsAllSame] = useState(false);\n\n  const newTodo: NewTodo = {\n    userId: user.id,\n    title: query.trim(),\n    completed: false,\n  };\n\n  const handleSubmit = (event: FormEvent) => {\n    event.preventDefault();\n    setIsLoading(true);\n    if (newTodo.title.length <= 0) {\n      setErrorMessage('rpigejiajh');\n\n      return;\n    }\n\n    addTodos(newTodo)\n      .then((currentTodo: Todo) => {\n        setIsError(false);\n        setErrorMessage('');\n        setTodos((prev: Todo[]) => ([...prev, currentTodo]));\n        setQuery('');\n      })\n      .catch(() => {\n        setIsError(true);\n        setErrorMessage('add');\n      })\n      .finally(() => setIsLoading(false));\n  };\n\n  const toggleAll = () => {\n    setIsLoading(true);\n    // check if all todos the same\n    const sameTodos = todos\n      .every(todo => todo.completed === todos[0].completed);\n\n    // if the same - do variable true or false\n    if (sameTodos) {\n      setIsAllSame(todos[0].completed);\n    }\n\n    setTodos((prev: Todo[]) => {\n      return prev.map(todo => {\n        const rewrittenTodo = { ...todo };\n\n        if (sameTodos) {\n          rewrittenTodo.completed = !todos[0].completed;\n        } else {\n          rewrittenTodo.completed = true;\n        }\n\n        editTodo(todo.id, todo.title, rewrittenTodo.completed);\n        setIsAllSame(true);\n\n        return rewrittenTodo;\n      });\n    });\n    setIsLoading(false);\n  };\n\n  return (\n    <header className=\"todoapp__header\">\n      {\n        todos.length >= 1\n        && (\n          <button\n            data-cy=\"ToggleAllButton\"\n            type=\"button\"\n            className=\"todoapp__toggle-all active\"\n            onClick={() => toggleAll()}\n          />\n        )\n      }\n\n      <form\n        onSubmit={handleSubmit}\n\n      >\n        <input\n          data-cy=\"NewTodoField\"\n          type=\"text\"\n          ref={newTodoField}\n          className=\"todoapp__new-todo\"\n          placeholder=\"What needs to be done?\"\n          value={query}\n          onChange={(event) => setQuery(event.target.value)}\n        />\n      </form>\n    </header>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}